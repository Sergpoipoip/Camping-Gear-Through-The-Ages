<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Timeline · Evolution of Writing</title>

  <!-- Project favicon -->
  <link rel="icon" type="image/png" href="imgs/favicon-32x32.png">

  <!-- Core stylesheet shared across the site -->
  <link rel="stylesheet" href="css/common.css">

  <!-- Bootstrap (helps us stay responsive with minimal custom CSS) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Page‑specific styles (kept small; feel free to move to css/timeline.css later) -->
  <style>
    :root {
      /* tweak the accent colour for this page only */
      --tl-accent: var(--color3, #542E71);
    }

    /* =================  VERTICAL TIMELINE  ================= */
    main {
      padding-top: 3rem;
      padding-bottom: 4rem;
    }

    .timeline {
      position: relative;
      margin: 0;
      padding-left: 2rem;            /* space for the vertical line */
      border-left: 4px solid var(--tl-accent);
    }

    /* the circular ticks */
    .timeline::before {
      content: "";
      position: absolute;
      left: -10px;
      top: 0;
      bottom: 0;
      width: 0;
      border-left: 2px dashed var(--tl-accent);
    }

    .tl-item {
      position: relative;
      margin-bottom: 2.5rem;
      gap: .75rem;
    }

    .tl-item::before {
      content: "";
      position: absolute;
      left: -15px;
      top: .35rem;                   /* vertically aligns with first line of content */
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: var(--tl-accent);
    }

    /* nicer look for period headers */
    .period-badge {
      font-family: var(--font-family-header);
      font-size: 1.4rem;
      color: var(--color4, #282625);
      margin: 3rem 0 1.5rem;
      display: flex;
      align-items: center;
      gap: .5rem;
    }
    .period-badge::before {
      content: "";
      display: inline-block;
      width: 30px;
      height: 4px;
      background: var(--tl-accent);
    }

    /* image thumbnails */
    .tl-thumb {
      flex-shrink: 0;
      width: 110px;
      height: 110px;
      object-fit: cover;
      border-radius: .5rem;
      box-shadow: 0 2px 6px rgba(0,0,0,.15);
    }

    @media (min-width: 768px) {
      .tl-item {display: flex; align-items: flex-start;}
    }
  </style>
</head>
<body>

<!-- ============  NAVBAR (identical to index.html for coherence)  ============ -->
<nav class="navbar navbar-expand-md navbar-light">
  <div class="container">
    <!-- logo & title -->
    <div id="projectTitle" class="d-flex align-items-center gap-2">
      <img id="logo" src="imgs/favicon-32x32.png" alt="Logo" width="32" height="32">
      <a class="navbar-brand fw-semibold" href="index.html">
        <span id="highlight">Evolution</span> of Writing
      </a>
    </div>

    <!-- burger button -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu"
            aria-controls="navMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- links -->
    <div class="collapse navbar-collapse navbar-menu" id="navMenu">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="narratives.html">Narratives</a></li>
        <li class="nav-item"><a class="nav-link" href="items.html">Items</a></li>
        <li class="nav-item"><a class="nav-link active" aria-current="page" href="timeline.html">Timeline</a></li>
        <li class="nav-item"><a class="nav-link" href="map.html">Map</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
      </ul>
    </div>
  </div>
</nav>
<!-- /Navbar -->


<!-- ==========================  MAIN CONTENT  ========================== -->
<main class="container">
  <h1 class="text-center mb-5 fw-bold">Writing Through Time</h1>
  <!-- the timeline will be populated here -->
  <div id="timeline" class="timeline"></div>
</main>


<!-- ======================  FOOTER (short)  ====================== -->
<footer class="footer">
  <p class="mb-2">© 2025 · <a href="index.html">The Evolution of Writing</a></p>
  <small class="text-muted">Timeline built dynamically from <code>items.json</code></small>
</footer>


<!-- ======================  SCRIPTS  ====================== -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  /* -------------------------------------------------------
   * Build the vertical timeline on the fly from items.json
   * ----------------------------------------------------- */
  fetch('items.json')
    .then(res => res.json())
    .then(dataset => {
      const container = document.getElementById('timeline');
      if (!dataset?.items) return;

      // sort chronologically using the @sort numeric field
      const items = [...dataset.items].sort((a,b) => Number(a['@sort']) - Number(b['@sort']));

      // helper to inject period headers only once per periodTag
      let currentPeriod = '';

      items.forEach(item => {
        if (item.periodTag !== currentPeriod) {
          currentPeriod = item.periodTag;
          const h = document.createElement('h3');
          h.textContent = currentPeriod;
          h.className = 'period-badge';
          container.appendChild(h);
        }

        // timeline entry
        const article = document.createElement('article');
        article.className = 'tl-item';

        // thumbnail image
        const img = document.createElement('img');
        img.className = 'tl-thumb';
        img.src = item.image;
        img.alt = item.shortName;
        article.appendChild(img);

        // content block
        const bodyDiv = document.createElement('div');

        const title = document.createElement('h4');
        title.textContent = item.shortName;
        bodyDiv.appendChild(title);

        // production date (if available)
        const date = item.info?.['Production Date'];
        if (date) {
          const small = document.createElement('small');
          small.className = 'text-muted d-block mb-1';
          small.textContent = date;
          bodyDiv.appendChild(small);
        }

        // short blurb
        if (item.shortInfo) {
          const p = document.createElement('p');
          p.className = 'mb-2';
          p.textContent = item.shortInfo;
          bodyDiv.appendChild(p);
        }

        // link to items page – passes @sort id so items.html can open the modal automatically
        const link = document.createElement('a');
        link.href = 'items.html?sid=' + encodeURIComponent(item['@sort']);
        link.className = 'btn btn-sm btn-outline-primary';
        link.textContent = 'See more';
        bodyDiv.appendChild(link);

        article.appendChild(bodyDiv);
        container.appendChild(article);
      });
    })
    .catch(err => {
      console.error('Unable to build timeline:', err);
      const container = document.getElementById('timeline');
      container.innerHTML = '<p class="text-danger">Failed to load timeline data.</p>';
    });
</script>
</body>
</html>

